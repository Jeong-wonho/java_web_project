<!-- <!DOCTYPE html>
<html lang="kor">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
      crossorigin="anonymous"
    />

    <title>Hello, Slur!</title>
    <style>
      .form-login {
        width: 100%;
        max-width: 330px;
        padding: 15px;
        margin: auto;
      }
      p.slur{
        font-size: 2rem;
        margin: 10px;
        font-weight: 800;
      }
      p.text-muted {
        display: block;
        margin-block-start: 1em;
        margin-block-end: 1em;
        margin-inline-start: 0px;
        margin-inline-end: 0px;
      }
      .role {
        text-align: center !important;
      }

      .membership-btn {
        width: 300px;
        height: 50px;
        margin: auto;
      }
    </style>
    <!-- <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      $(function () {
        // alert("login load");
        //1.localStorage의 item(이름: loginInfo)찾기
        var loginInfoValue = localStorage.getItem("loginInfo");

        //2. 1의 결과가 null이거나 ''이 아니면 1의결과를 아이디입력란에 설정한다
        var idObj = $("form.form-login input[name=id]");
        //alert("login.html load idObj.value = " + idObj.value);
        if (loginInfoValue != null && loginInfoValue != "") {
          idObj.value = loginInfoValue;
        }
        $("form.form-login").submit(function () {
         
          localStorage.removeItem("loginInfo");

          var chkboxObj = $("form.form-login input[type=checkbox]");
          //2)체크여부확인
          if (chkboxObj.checked) {
            //체크된 경우
            localStorage.setItem("loginInfo", idObj.value); //localStorage에 추가
          }

        
          /* var url = 'http://localhost:8888/myback/login'; */
          var url = "/slur/login";
          //서버로 AJAX 요청,응답
          var data = {};
          data.user_id = $("form.form-login input[name=id]").val();
          data.user_pwd = $("form.form-login input[name=pwd]").val();
          var dataJsonStr = JSON.stringify(data);
          alert(dataJsonStr);

          $.ajax({
            url: url,
            data: dataJsonStr,
            method: "POST",
            transformRequest: [null],
            transformResponse: [null],
            jsonpCallbackParam: "callback",

            headers: {
              Accept: "application/json, text/plain, */*",
              "Content-Type": "application/json;charset=utf-8",
            },
            success: function (responseData) {
             
              if (responseData.status == 1) {
                //로그인 성공됨!
                  
                sessionStorage.setItem("user_id", responseData.User.user_id);
                location.href="./slur_main.html";
              } else {
                alert(responseData.msg);
              }
            },
            error: function (xhr) {
              alert(xhr.status);
            },
          });
          event.preventDefault();
        }); //submit function

        $('button.membership-btn').click(function(){
          $("section.role").load(
            "./slur_membership.html",
            function (responseTxt, statusTxt, xhr) {
              if (statusTxt == "error")
                alert("Error:" + xhr.status + ":" + xhr.statusTxt);
            });
        });
      }); 
    </script>
  </head>
  <body>
    <section class="role container">
      <form class="form-login">
        <p class="slur">Slur</p>
        <h1 class="h3 mb-3 font-weight-normal">로그인해주세요</h1>
        <label for="inputEmail md-3" class="sr-only">id입력</label>
        <input
          type="text"
          id="inputId"
          name="id"
          class="form-control md-3"
          placeholder="아이디"
          required
          autocomplete="name"
          value=""
        />
        <label for="inputPassword" class="sr-only">비밀번호 입력</label>
        <input
          type="password"
          id="inputPassword"
          name="pwd"
          class="form-control mt-2"
          placeholder="비밀번호"
          required
          autocomplete="off"
          value=""
        />
        <div class="checkbox mb-3">
          <label style="float:right">
            <input type="checkbox" value="remember-me" /> 아이디 기억
          </label>
        </div>
        <button class="btn btn-lg btn-primary btn-block" type="submit">
          로그인
        </button>
      </form>
      <hr />
      <button type="button" class="btn btn-primary membership-btn">
        회원가입
      </button>
      <p class="mt-5 mb-3 text-muted">© 2017-2021</p>
    </section>
  <!-- </body>
</html> -->
